---
id: REQ-001
title: Scoreboard met naaminvoer bij game over
status: completed
created_at: 2026-02-18T12:00:00Z
user_request: UR-001
claimed_at: 2026-02-18T12:15:00Z
route: B
completed_at: 2026-02-18T12:25:00Z
---

# Scoreboard met naaminvoer bij game over

## What
Voeg een scoreboard toe aan de game. Wanneer de speler doodgaat, verschijnt een invoerveld waar de speler zijn/haar naam kan invullen. De score wordt samen met de naam opgeslagen en getoond op een scorebord.

## Context
De game slaat momenteel alleen een high score op in localStorage. Dit breidt dat uit naar een volledig scorebord met meerdere entries en namen.

## Addendum (2026-02-18)

User added: "de start pagina moet ook het leaderboard hebben"

- Het leaderboard moet ook zichtbaar zijn op de startpagina van de game

---
*Source: "ik wil graag een scoreboard toevoegen aan de game... als je dood gaat kan je je nam invullen en dan komen je punten op het bord te staan"*

---

## Triage

**Route: B** - Medium

**Reasoning:** Duidelijke feature (scoreboard met naaminvoer + weergave op startpagina), maar moet de codebase verkennen om game over handling, startscherm rendering en localStorage patronen te vinden.

**Planning:** Not required

## Plan

**Planning not required** - Route B: Exploration-guided implementation

Rationale: Duidelijke feature met goed gedefinieerd resultaat. Moet bestaande game over en startscherm patronen in game.js ontdekken.

*Skipped by work action*

## Exploration

- **Game over handler**: `gameOver()` at lines 697-705. Sets `gameRunning=false`, updates high score in localStorage key `'poppiesHighScore'`
- **Game over screen**: `drawGameOver()` at lines 1880-1959. Shows overlay, score, best score, blinking restart prompt
- **Start screen**: `drawStartScreen()` at lines 1799-1878. Doodle box with title "De Gekke Poppies", payoff "Door Dex", blinking spatie prompt, control instructions
- **High score storage**: Line 266: `let highScore = localStorage.getItem('poppiesHighScore') || 0`. Updated on game over and level complete
- **State flags**: `gameStarted`, `gameRunning`, `levelComplete`, `gameWon` (lines 263-269)
- **State check in draw**: Lines 1994-2002 checks `!gameStarted` → drawStartScreen, `!gameRunning` → drawGameOver
- **UI patterns**: Canvas-based overlays with semi-transparent backgrounds, doodleRect() for hand-drawn boxes, Patrick Hand font, shadow text, blinking via `Math.sin(time * 4) > 0`
- **Scaling**: `getScale()` returns `canvas.width / BASE_WIDTH` (1200px logical width)

*Generated by Explore agent*

## Implementation Summary

- Modified `index.html`: Added name input overlay (#nameInputOverlay) met titel, input veld (max 12 chars), OK-knop
- Modified `style.css`: Styled overlay met piraten/doodle thema (Patrick Hand font, perkament kleuren, rotatie)
- Modified `game.js`:
  - Nieuwe state vars: `waitingForName`, `showingLeaderboard`
  - Leaderboard functies: `loadLeaderboard()`, `saveLeaderboard()`, `addToLeaderboard()`
  - Naaminvoer functies: `showNameInput()`, `hideNameInput()`, `submitName()`
  - Event listeners voor OK-knop, Enter-toets, keyboard blokkering tijdens invoer
  - `gameOver()` toont nu naaminvoer i.p.v. direct restart
  - `drawStartScreen()` toont top 5 scores
  - `drawGameOver()` heeft nu 3 states: naaminvoer, leaderboard, fallback
  - Top 3 entries in goud/zilver/brons kleuren

*Completed by work action (Route B)*

## Testing

**Tests run:** N/A
**Result:** No testing infrastructure detected

*Verified by work action*
